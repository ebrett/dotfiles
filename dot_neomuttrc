# Neomutt Configuration for Multiple Accounts
# Generated by Claude Code
# Supports: Proton Mail (brett@mchargue.net) and Fastmail (personal@ebrett.me)

# =============================================================================
# GENERAL SETTINGS (applies to all accounts)
# =============================================================================

# Connection Settings
set imap_keepalive = 300
set mail_check = 120
set timeout = 300

# Cache for performance
set header_cache = "~/.cache/neomutt/headers"
set message_cachedir = "~/.cache/neomutt/bodies"

# Interface Settings
set sort = reverse-date-received
set pager_index_lines = 10
set pager_context = 3
set pager_stop = yes
set menu_scroll = yes
set tilde = yes
set markers = no

# Sidebar (mailbox list on left)
set sidebar_visible = yes
set sidebar_width = 25
set sidebar_format = "%B%?F? [%F]?%* %?N?%N/?%S"
set mail_check_stats

# Key bindings for sidebar
bind index,pager \CP sidebar-prev
bind index,pager \CN sidebar-next
bind index,pager \CO sidebar-open

# Editor
set editor = "nvim"

# Colors (basic theme)
color index brightblue default ~N  # New messages
color index red default ~D         # Deleted messages
color index brightcyan default ~T  # Tagged messages

# HTML emails (requires w3m or lynx)
auto_view text/html
alternative_order text/plain text/html

# Index format
set index_format = "%4C %Z %{%b %d} %-15.15L (%?l?%4l&%4c?) %s"

# =============================================================================
# ACCOUNT SWITCHING MACROS
# =============================================================================

# Switch to Proton Mail account (,1)
macro index,pager ,1 '<sync-mailbox><enter-command>source ~/.neomutt/account.proton<enter><change-folder>!<enter><check-stats>' "Switch to Proton Mail"

# Switch to Fastmail account (,2)
macro index,pager ,2 '<sync-mailbox><enter-command>source ~/.neomutt/account.fastmail<enter><change-folder>!<enter><check-stats>' "Switch to Fastmail"

# =============================================================================
# DEFAULT ACCOUNT - Proton Mail
# =============================================================================

source ~/.neomutt/account.proton
